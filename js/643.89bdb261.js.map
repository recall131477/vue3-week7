{"version":3,"file":"js/643.89bdb261.js","mappings":"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","sources":["webpack://vue3-week7/./src/views/frontend/CheckorderView.vue","webpack://vue3-week7/./src/views/frontend/CheckorderView.vue?1048"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mt-4\">\n      <h2 class=\"text-center\">確認訂單</h2>\n    </div>\n    <div>\n      <ul>\n        <li class=\"row row-cols-2\">\n          <span>下單時間</span>\n          <span>{{ $filters.date(order.create_at) }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>訂單編號</span>\n          <span>{{ order.id }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>姓名</span>\n          <span>{{ user.name }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>電話</span>\n          <span>{{ user.tel }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>Email</span>\n          <span>{{ user.email }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>地址</span>\n          <span>{{ user.address }}</span>\n        </li>\n        <li class=\"row row-cols-2\" v-if=\"order.message\">\n          <span>備註</span>\n          <span>{{ order.message }}</span>\n        </li>\n        <li class=\"row row-cols-2\">\n          <span>總計</span>\n          <span>NT${{ $filters.currency(order.total) }}</span>\n        </li>\n        <li>\n          <span>購買產品</span>\n          <ul>\n            <li class=\"d-flex align-items-center\" v-for=\"item in products\" :key=\"item.id\">\n              <div>\n                <img :src=\"item.product.imageUrl\" :alt=\"item.title\" />\n              </div>\n              <div>{{ item.product.title }}</div>\n              <div class=\"mx-4\">{{ item.qty }}</div>\n              <div>NT${{ $filters.currency(item.total) }}</div>\n            </li>\n          </ul>\n        </li>\n      </ul>\n      <button type=\"button\" class=\"btn btn-primary\" @click=\"payOrder\">確認結帳</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      order: {},\n      orderId: '',\n      user: {},\n      products: {},\n    };\n  },\n  methods: {\n    // 取得訂單資料\n    getOrder() {\n      const { id } = this.$route.params; // 解構式取出 id\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.order = res.data.order;\n          this.user = res.data.order.user;\n          this.products = res.data.order.products;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 訂單付款\n    payOrder() {\n      const { id } = this.$route.params; // 解構式取出 id\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/pay/${id}`;\n      const status = '付款';\n      this.$http\n        .post(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.$router.push({\n              name: '完成購物', // params 只能用 name 不能用 path\n              params: { id: this.orderId },\n            });\n            this.$messageState(res, status);\n          } else {\n            this.$messageState(res.data.message, '錯誤訊息');\n          }\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n  },\n  mounted() {\n    if (this.$route.params.id) {\n      this.orderId = this.$route.params.id;\n    }\n    this.getOrder();\n  },\n};\n</script>\n\n<style lang=\"scss\">\nli {\n  list-style: none;\n}\n\nimg {\n  width: 200px;\n  height: 100px;\n  object-fit: cover;\n}\n</style>\n","import { render } from \"./CheckorderView.vue?vue&type=template&id=9d087730\"\nimport script from \"./CheckorderView.vue?vue&type=script&lang=js\"\nexport * from \"./CheckorderView.vue?vue&type=script&lang=js\"\n\nimport \"./CheckorderView.vue?vue&type=style&index=0&id=9d087730&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_hoisted_4","_toDisplayString","_ctx","date","$data","create_at","_hoisted_6","id","_hoisted_8","name","_hoisted_10","tel","_hoisted_12","email","_hoisted_14","address","message","_hoisted_16","_hoisted_18","currency","total","_hoisted_19","_Fragment","_renderList","item","key","src","product","imageUrl","alt","title","qty","type","onClick","$options","data","order","orderId","user","products","methods","getOrder","this","$route","params","url","$http","get","then","res","catch","err","$messageState","response","payOrder","status","post","success","$router","push","mounted","__exports__","render"],"sourceRoot":""}