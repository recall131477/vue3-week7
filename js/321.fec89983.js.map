{"version":3,"file":"js/321.fec89983.js","mappings":"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","sources":["webpack://vue3-week7/./src/views/frontend/ProductView.vue","webpack://vue3-week7/./src/views/frontend/ProductView.vue?91bf"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mt-4\">\n      <VLoading :active=\"isLoading\"></VLoading>\n      <h2 class=\"text-center\">單一產品</h2>\n      <table class=\"table align-middle\">\n        <thead>\n          <tr>\n            <th>圖片</th>\n            <th>商品名稱</th>\n            <th>價格</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style=\"width: 200px\">\n              <img :src=\"product.imageUrl\" alt=\"產品圖片\" />\n            </td>\n            <td>\n              {{ product.title }}\n            </td>\n            <td>\n              <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n                {{ product.price }} 元\n              </div>\n              <div v-else>\n                <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n                <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n              </div>\n            </td>\n            <td>\n              <div class=\"btn-group btn-group-sm\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-danger\"\n                  @click=\"addToCart(product.id)\"\n                  :disabled=\"isLoadingItem === product.id || !product.is_enabled\"\n                >\n                  加到購物車\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div v-if=\"filterProducts.length > 0\">\n        <h3 class=\"text-center\">相關產品</h3>\n        <ul class=\"row\">\n          <li class=\"col-3\" v-for=\"item in filterProducts\" :key=\"item.id\">\n            <img :src=\"item.imageUrl\" alt=\"\" />\n            {{ item.title }}\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      product: [],\n      isLoadingItem: '',\n      isLoading: false,\n    };\n  },\n  inject: ['routerRefresh'],\n  watch: {\n    $route: {\n      // 網址變更時觸發\n      handler() {\n        this.routerRefresh();\n      },\n    },\n  },\n  computed: {\n    // 過濾產品並顯示該系列相關產品\n    filterProducts() {\n      const { category, id } = this.product; // 解構取出 category 與 id\n      return this.products.filter(\n        (item) => item.category === category && item.id !== id,\n      );\n    },\n  },\n  methods: {\n    // 取得所有產品資料\n    getProducts() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 取得產品資料\n    getProduct() {\n      this.isLoading = true;\n      const { id } = this.$route.params; // 解構式取出 id\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.product = res.data.product;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    addToCart(id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty,\n      };\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoadingItem = id;\n      const status = '加入購物車';\n      this.$http\n        .post(url, { data })\n        .then((res) => {\n          this.$messageState(res, status);\n          this.isLoadingItem = '';\n          emitter.emit('get-cart');\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n  },\n  mounted() {\n    this.getProduct();\n    this.getProducts();\n  },\n};\n</script>\n\n<style lang=\"scss\">\nimg {\n  width: 100%;\n  height: 100px;\n  object-fit: cover;\n}\nli {\n  list-style: none;\n}\n</style>\n","import { render } from \"./ProductView.vue?vue&type=template&id=846f73ae\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductView.vue?vue&type=style&index=0&id=846f73ae&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_VLoading","active","$data","_hoisted_3","_hoisted_5","src","imageUrl","alt","_toDisplayString","title","price","origin_price","_hoisted_9","type","onClick","$options","id","disabled","is_enabled","_hoisted_13","length","_hoisted_14","_hoisted_15","_Fragment","_renderList","item","key","data","products","product","isLoadingItem","isLoading","inject","watch","$route","handler","this","routerRefresh","computed","filterProducts","category","filter","methods","getProducts","url","$http","get","then","res","catch","err","$messageState","response","getProduct","params","addToCart","qty","product_id","status","post","emitter","mounted","__exports__","render"],"sourceRoot":""}