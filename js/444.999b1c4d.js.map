{"version":3,"file":"js/444.999b1c4d.js","mappings":"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","sources":["webpack://vue3-week7/./src/views/frontend/CartView.vue","webpack://vue3-week7/./src/components/FrontCouponModal.vue","webpack://vue3-week7/./src/components/FrontCouponModal.vue?7f50","webpack://vue3-week7/./src/views/frontend/CartView.vue?3246"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mt-4\">\n      <VLoading :active=\"isLoading\"></VLoading>\n      <h2 class=\"text-center\">購物車</h2>\n      <!-- 購物車列表 -->\n      <div class=\"text-end\">\n        <!-- 購物車產品為 0 時，清空購物車不可點擊 -->\n        <button\n          class=\"btn btn-outline-danger\"\n          type=\"button\"\n          @click=\"deleteAllCarts\"\n          :disabled=\"cart.carts.length === 0\"\n          :class=\"{ 'not-pointer': cart.carts.length === 0 }\"\n        >\n          清空購物車\n        </button>\n        <router-link to=\"/products\" class=\"btn btn-primary mx-3\" v-if=\"cart.carts.length !== 0\"\n          >繼續購物</router-link\n        >\n        <router-link\n          to=\"/checkout\"\n          class=\"btn btn-primary\"\n          :class=\"{ 'not-pointer disabled': cart.carts.length === 0 }\"\n        >\n          前往結帳\n        </router-link>\n      </div>\n      <div class=\"text-center\" v-if=\"cart.carts.length === 0\">\n        <p>購物車目前沒有商品</p>\n        <router-link to=\"/products\" class=\"btn btn-outline-danger\">前往購物</router-link>\n      </div>\n      <table class=\"table align-middle\" v-else>\n        <thead>\n          <tr>\n            <th style=\"width: 25%\"></th>\n            <th style=\"width: 25%\">品名</th>\n            <th style=\"width: 10%\">數量/單位</th>\n            <th style=\"width: 25%\" class=\"text-end\">單價</th>\n          </tr>\n        </thead>\n        <tbody>\n          <!-- 判斷購物車資料是否存在 -->\n          <template v-if=\"cart.carts\">\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n              <td>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-danger btn-sm\"\n                  @click=\"deleteCartItem(item.id)\"\n                  :disabled=\"isLoadingItem === item.id\"\n                >\n                  <i class=\"fas fa-spinner fa-pulse\" v-if=\"isLoadingItem === item.id\"></i>\n                  x\n                </button>\n              </td>\n              <td>\n                {{ item.product.title }}\n              </td>\n              <td>\n                <div class=\"input-group input-group-sm\">\n                  <div class=\"input-group mb-3\">\n                    <select\n                      id=\"\"\n                      class=\"form-select\"\n                      v-model=\"item.qty\"\n                      @change=\"updateCartItem(item)\"\n                      :disabled=\"isLoadingItem === item.id\"\n                    >\n                      <option :value=\"num\" v-for=\"num in 20\" :key=\"`${num}-${item.id}`\">\n                        {{ num }}\n                      </option>\n                    </select>\n                    <span class=\"input-group-text\" id=\"basic-addon2\">{{ item.product.unit }}</span>\n                  </div>\n                </div>\n              </td>\n              <td class=\"text-end\">\n                {{ item.total }}\n              </td>\n            </tr>\n          </template>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"3\" class=\"text-end\">總計</td>\n            <td class=\"text-end\">{{ cart.total }}</td>\n          </tr>\n          <tr v-if=\"isCoupon\">\n            <td colspan=\"3\" class=\"text-end\">折扣後金額</td>\n            <td class=\"text-end\">{{ cart.final_total }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <div class=\"d-flex justify-content-end align-items-center\">\n        <div>\n          <label for=\"coupon\">優惠券</label>\n          <input type=\"text\" id=\"coupon\" :disabled=\"isCoupon\" v-model=\"couponCode\" />\n        </div>\n        <button type=\"button\" class=\"btn btn-success\" :disabled=\"isCoupon\" v-if=\"isCoupon\">\n          已套用優惠券\n        </button>\n        <button type=\"button\" class=\"btn btn-success\" @click=\"openModal\" v-else>領取優惠券</button>\n      </div>\n    </div>\n  </div>\n  <FrontCouponModal ref=\"frontCouponModal\" @get-coupon=\"useCoupon\"></FrontCouponModal>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter';\nimport FrontCouponModal from '@/components/FrontCouponModal.vue';\n\nexport default {\n  data() {\n    return {\n      cart: {\n        carts: [],\n      },\n      couponCode: '',\n      isLoadingItem: '',\n      isLoading: false,\n      isCoupon: false,\n      status: '',\n    };\n  },\n  components: {\n    FrontCouponModal,\n  },\n  methods: {\n    // 取得購物車資料\n    getCart() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.cart = res.data.data;\n          if (this.cart.final_total !== this.cart.total) {\n            this.isCoupon = true;\n            this.couponCode = 'double777';\n          } else {\n            this.isCoupon = false;\n          }\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 更新購物車\n    updateCartItem(item) {\n      const data = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const status = '更新商品';\n      this.isLoadingItem = item.id;\n      this.$http\n        .put(url, { data })\n        .then((res) => {\n          this.$messageState(res, status);\n          this.getCart();\n          this.isLoadingItem = '';\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 刪除購物車特定產品\n    deleteCartItem(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      const status = '刪除商品';\n      this.isLoadingItem = id;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          this.$messageState(res, status);\n          emitter.emit('get-cart');\n          this.getCart();\n          this.isLoadingItem = '';\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 刪除購物車全部產品\n    deleteAllCarts() {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`;\n      const status = '刪除全部商品';\n      this.$http\n        .delete(url)\n        .then((res) => {\n          this.$messageState(res, status);\n          emitter.emit('get-cart');\n          this.getCart();\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 領取優惠券\n    useCoupon() {\n      this.couponCode = 'double777';\n      this.isCoupon = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`;\n      const data = {\n        code: this.couponCode,\n      };\n      this.$http\n        .post(url, { data })\n        .then((res) => {\n          if (res.data.success) {\n            console.log(res);\n            this.cart.final_total = res.data.data.final_total;\n            this.isCoupon = true;\n          }\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    openModal() {\n      // 打開 modal 並判斷執行動作\n      this.$refs.frontCouponModal.openCouponModal(); // 開啟新增、編輯優惠券\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.not-pointer {\n  cursor: not-allowed !important;\n  pointer-events: inherit !important;\n}\n</style>\n","<template>\n  <div class=\"modal fade\" ref=\"frontCouponModal\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"coupon-puzzle\">\n          <div class=\"wait\">\n            <ul>\n              <li\n                v-for=\"(item, index) in todoWait\"\n                :key=\"item.url\"\n                @click=\"handPuzzle(item, index)\"\n              >\n                <img :src=\"item.url\" alt=\"\" />\n              </li>\n            </ul>\n          </div>\n          <div class=\"carried\">\n            <ul>\n              <li\n                v-for=\"(item, index) in todoOver\"\n                :key=\"item.url\"\n                @click=\"resetPuzzle(item, index)\"\n              >\n                <img :src=\"item.url\" alt=\"\" />\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\nimport puzzleImg1 from '@/assets/img/Puzzle/1.png';\nimport puzzleImg2 from '@/assets/img/Puzzle/2.png';\nimport puzzleImg3 from '@/assets/img/Puzzle/3.png';\nimport puzzleImg4 from '@/assets/img/Puzzle/4.png';\nimport puzzleImg5 from '@/assets/img/Puzzle/5.png';\nimport puzzleImg6 from '@/assets/img/Puzzle/6.png';\nimport puzzleImg7 from '@/assets/img/Puzzle/7.png';\nimport puzzleImg8 from '@/assets/img/Puzzle/8.png';\nimport puzzleImg9 from '@/assets/img/Puzzle/9.png';\n\nexport default {\n  data() {\n    return {\n      couponModal: '',\n      todoWait: [\n        {\n          idx: 8,\n          url: puzzleImg9,\n        },\n        {\n          idx: 1,\n          url: puzzleImg2,\n        },\n        {\n          idx: 6,\n          url: puzzleImg7,\n        },\n        {\n          idx: 5,\n          url: puzzleImg6,\n        },\n        {\n          idx: 7,\n          url: puzzleImg8,\n        },\n        {\n          idx: 0,\n          url: puzzleImg1,\n        },\n        {\n          idx: 3,\n          url: puzzleImg4,\n        },\n        {\n          idx: 2,\n          url: puzzleImg3,\n        },\n        {\n          idx: 4,\n          url: puzzleImg5,\n        },\n      ],\n      todoOver: [],\n      winIdx: 0,\n      isWin: false,\n    };\n  },\n  watch: {\n    todoOver: {\n      handler(newArr) {\n        this.winIdx = 0;\n        newArr.forEach((item, index) => {\n          if (item.idx === index) {\n            this.winIdx += 1;\n          }\n        });\n      },\n      deep: true,\n    },\n    winIdx(newVal) {\n      if (newVal === 9) {\n        this.isWin = true;\n        this.closeCouponModal();\n        this.$emit('get-coupon');\n      }\n    },\n  },\n  methods: {\n    // 將陣列隨機\n    randomArr() {\n      this.todoWait.sort(() => (Math.random() > 0.5 ? -1 : 1));\n    },\n    handPuzzle(item, index) {\n      this.todoOver.push(item);\n      this.todoWait.splice(index, 1);\n    },\n    resetPuzzle(item, index) {\n      this.todoWait.push(item);\n      this.todoOver.splice(index, 1);\n    },\n    openCouponModal() {\n      // 開啟優惠券 modal\n      this.couponModal.show();\n    },\n    closeCouponModal() {\n      // 關閉優惠券 modal\n      this.couponModal.hide();\n    },\n  },\n  mounted() {\n    this.randomArr();\n    this.couponModal = new Modal(this.$refs.frontCouponModal);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.coupon-puzzle {\n  > div {\n    background-size: 100% 100%;\n  }\n  ul {\n    margin: 0;\n    padding: 0;\n  }\n  li {\n    cursor: pointer;\n    display: block;\n    width: 166px;\n    height: 166px;\n    border: 1px solid #fff;\n    float: left;\n  }\n  .modal-dialog {\n    max-width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: calc(100% - 3.5rem);\n  }\n  .modal-backdrop {\n    background-color: rgba(#000, 0.6);\n  }\n\n  .modal-backdrop.show {\n    opacity: 0;\n  }\n}\n\nimg {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.wait {\n  width: 500px;\n  height: 500px;\n  background-color: #fff;\n}\n\n.carried {\n  width: 500px;\n  height: 500px;\n  background-color: #fff;\n  background-size: cover;\n  background-image: url('@/assets/img/Puzzle/bg2.jpg');\n}\n\n.winPage {\n  position: fixed;\n  top: -100%;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: top 0.3s;\n}\n.winPage.open {\n  top: 0;\n}\n\n.winPage > h1 {\n  color: #fff;\n  font-size: 60px;\n}\n\n.close {\n  position: absolute;\n  top: 15%;\n  right: 20%;\n}\n</style>\n","import { render } from \"./FrontCouponModal.vue?vue&type=template&id=3e0d4670\"\nimport script from \"./FrontCouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./FrontCouponModal.vue?vue&type=script&lang=js\"\n\nimport \"./FrontCouponModal.vue?vue&type=style&index=0&id=3e0d4670&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CartView.vue?vue&type=template&id=2344a6bb\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport \"./CartView.vue?vue&type=style&index=0&id=2344a6bb&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createVNode","_component_VLoading","active","$data","_hoisted_3","carts","length","type","onClick","$options","disabled","_hoisted_5","_createBlock","_component_router_link","to","_createElementBlock","_hoisted_9","_hoisted_12","_Fragment","key","_renderList","item","_toDisplayString","product","title","qty","$event","onChange","num","value","_hoisted_19","unit","total","_hoisted_22","_hoisted_24","_hoisted_25","final_total","_hoisted_28","_hoisted_30","_component_FrontCouponModal","ref","onGetCoupon","index","url","src","alt","data","couponModal","todoWait","idx","puzzleImg9","puzzleImg2","puzzleImg7","puzzleImg6","puzzleImg8","puzzleImg1","puzzleImg4","puzzleImg3","puzzleImg5","todoOver","winIdx","isWin","watch","handler","newArr","this","forEach","deep","newVal","closeCouponModal","$emit","methods","randomArr","sort","Math","random","handPuzzle","push","splice","resetPuzzle","openCouponModal","show","hide","mounted","Modal","$refs","frontCouponModal","__exports__","cart","couponCode","isLoadingItem","isLoading","isCoupon","status","components","FrontCouponModal","getCart","$http","get","then","res","catch","err","$messageState","response","updateCartItem","product_id","put","deleteCartItem","delete","emitter","deleteAllCarts","useCoupon","code","post","success","console","log","openModal","render"],"sourceRoot":""}