"use strict";(self["webpackChunkvue3_week7"]=self["webpackChunkvue3_week7"]||[]).push([[321],{2321:function(t,s,e){e.r(s),e.d(s,{default:function(){return D}});var i=e(6252),o=e(3577);const r={class:"container"},c={class:"mt-4"},d=(0,i._)("h2",{class:"text-center"},"單一產品",-1),a={class:"table align-middle"},u=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"圖片"),(0,i._)("th",null,"商品名稱"),(0,i._)("th",null,"價格"),(0,i._)("th")])],-1),n={style:{width:"200px"}},l=["src"],h={key:0,class:"h5"},p={key:1},g={class:"h6"},_={class:"h5"},m={class:"btn-group btn-group-sm"},v=["disabled"],w={key:0},b=(0,i._)("h3",{class:"text-center"},"相關產品",-1),k={class:"row"},f=["src"];function L(t,s,e,L,y,$){const P=(0,i.up)("VLoading");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",c,[(0,i.Wm)(P,{active:y.isLoading},null,8,["active"]),d,(0,i._)("table",a,[u,(0,i._)("tbody",null,[(0,i._)("tr",null,[(0,i._)("td",n,[(0,i._)("img",{src:y.product.imageUrl,alt:"產品圖片"},null,8,l)]),(0,i._)("td",null,(0,o.zw)(y.product.title),1),(0,i._)("td",null,[y.product.price===y.product.origin_price?((0,i.wg)(),(0,i.iD)("div",h,(0,o.zw)(y.product.price)+" 元 ",1)):((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("del",g,"原價 "+(0,o.zw)(y.product.origin_price)+" 元",1),(0,i._)("div",_,"現在只要 "+(0,o.zw)(y.product.price)+" 元",1)]))]),(0,i._)("td",null,[(0,i._)("div",m,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:s[0]||(s[0]=t=>$.addToCart(y.product.id)),disabled:y.isLoadingItem===y.product.id||!y.product.is_enabled}," 加到購物車 ",8,v)])])])])]),$.filterProducts.length>0?((0,i.wg)(),(0,i.iD)("div",w,[b,(0,i._)("ul",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.filterProducts,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"col-3",key:t.id},[(0,i._)("img",{src:t.imageUrl,alt:""},null,8,f),(0,i.Uk)(" "+(0,o.zw)(t.title),1)])))),128))])])):(0,i.kq)("",!0)])])}var y=e(4902),$={data(){return{products:[],product:[],isLoadingItem:"",isLoading:!1}},inject:["routerRefresh"],watch:{$route:{handler(){this.routerRefresh()}}},computed:{filterProducts(){const{category:t,id:s}=this.product;return this.products.filter((e=>e.category===t&&e.id!==s))}},methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/rousong/products/all";this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{this.$messageState(t.response,"錯誤訊息")}))},getProduct(){this.isLoading=!0;const{id:t}=this.$route.params,s=`https://vue3-course-api.hexschool.io/v2/api/rousong/product/${t}`;this.$http.get(s).then((t=>{this.product=t.data.product,this.isLoading=!1})).catch((t=>{this.$messageState(t.response,"錯誤訊息")}))},addToCart(t,s=1){const e={product_id:t,qty:s},i="https://vue3-course-api.hexschool.io/v2/api/rousong/cart";this.isLoadingItem=t;const o="加入購物車";this.$http.post(i,{data:e}).then((t=>{this.$messageState(t,o),this.isLoadingItem="",y.Z.emit("get-cart")})).catch((t=>{this.$messageState(t.response,"錯誤訊息")}))}},mounted(){this.getProduct(),this.getProducts()}},P=e(3744);const x=(0,P.Z)($,[["render",L]]);var D=x}}]);
//# sourceMappingURL=321.fec89983.js.map