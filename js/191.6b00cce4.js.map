{"version":3,"file":"js/191.6b00cce4.js","mappings":"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","sources":["webpack://vue3-week7/./src/components/PaginationComponent.vue","webpack://vue3-week7/./src/components/PaginationComponent.vue?4f9e","webpack://vue3-week7/./src/views/frontend/ProductsView.vue","webpack://vue3-week7/./src/views/frontend/ProductsView.vue?bf7f"],"sourcesContent":["<template>\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination justify-content-center\">\n      <li class=\"page-item\" :class=\"{ 'd-none': !pages.has_pre }\">\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Previous\"\n          @click.prevent=\"changePages(pages.current_page - (pages.total_pages - 1))\"\n        >\n          <span aria-hidden=\"true\">第一頁</span>\n        </a>\n      </li>\n      <li class=\"page-item\" :class=\"{ 'd-none': !pages.has_pre }\">\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Previous\"\n          @click.prevent=\"changePages(pages.current_page - 1)\"\n        >\n          <span aria-hidden=\"true\">上一頁</span>\n        </a>\n      </li>\n      <li\n        class=\"page-item\"\n        v-for=\"(page, index) in pages.total_pages\"\n        :key=\"index\"\n        :class=\"{ active: page === pages.current_page }\"\n      >\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"changePages(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\" :class=\"{ 'd-none': !pages.has_next }\">\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Previous\"\n          @click.prevent=\"changePages(pages.current_page + 1)\"\n        >\n          <span aria-hidden=\"true\">下一頁</span>\n        </a>\n      </li>\n      <li class=\"page-item\" :class=\"{ 'd-none': !pages.has_next }\">\n        <a\n          class=\"page-link\"\n          href=\"#\"\n          aria-label=\"Next\"\n          @click.prevent=\"changePages(pages.current_page + (pages.total_pages - 1))\"\n        >\n          <span aria-hidden=\"true\">最後一頁</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nexport default {\n  props: {\n    pages: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  methods: {\n    changePages(item) {\n      this.$emit('change-pages', item);\n    },\n  },\n};\n</script>\n","import { render } from \"./PaginationComponent.vue?vue&type=template&id=22160b7b\"\nimport script from \"./PaginationComponent.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"container\">\n    <div class=\"mt-4\">\n      <VLoading :active=\"isLoading\"></VLoading>\n      <h2 class=\"text-center\">產品列表</h2>\n      <ul class=\"d-flex menu\">\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('all')\">全部</a>\n        </li>\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('toast')\">吐司系列</a>\n        </li>\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('hamburger')\">漢堡系列</a>\n        </li>\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('fried')\">炸物系列</a>\n        </li>\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('platter')\">拼盤系列</a>\n        </li>\n        <li>\n          <a href=\"#\" @click.prevent=\"changeCategory('mainmeal')\">主餐系列</a>\n        </li>\n      </ul>\n      <!-- row 決定內層的數量 -->\n      <div class=\"row row-cols-1 row-cols-lg-4 g-3\">\n        <!-- 內層不定義寬度 -->\n        <div class=\"col\" v-for=\"product in products\" :key=\"product.id\">\n          <div class=\"card h-100\">\n            <img :src=\"product.imageUrl\" class=\"card-img-top\" alt=\"...\" />\n            <div class=\"card-body\">\n              <div class=\"d-flex justify-content-between\">\n                <h5 class=\"card-title\">{{ product.title }}</h5>\n                <button type=\"button\" @click.prevent=\"toggleFavorite(product.id)\">\n                  <span v-if=\"favorite.includes(product.id)\"><i class=\"bi bi-heart-fill\"></i></span>\n                  <span v-else><i class=\"bi bi-heart\"></i></span>\n                </button>\n              </div>\n              <p class=\"card-text\">\n                {{ product.description }}\n              </p>\n              <router-link class=\"btn btn-primary w-100\" :to=\"`/product/${product.id}`\"\n                >查看更多</router-link\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Pagination :pages=\"pagination\" @change-pages=\"getProducts\"></Pagination>\n</template>\n\n<script>\nimport Pagination from '@/components/PaginationComponent.vue';\nimport emitter from '@/libs/emitter';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      isLoading: false,\n      pagination: {},\n      category: 'all',\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [], // 若陣列沒資料，賦予空陣列\n    };\n  },\n  components: {\n    Pagination,\n  },\n  watch: {\n    // 因為是陣列，需要做深層監聽\n    favorite: {\n      handler() {\n        // localStorage 自訂欄位\n        localStorage.setItem('favorite', JSON.stringify(this.favorite));\n        emitter.emit('get-favorite');\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    changeCategory(category) {\n      this.category = category;\n      this.getProducts();\n    },\n    getProducts(page = 1) {\n      this.isLoading = true;\n      let url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?page=${page}`;\n      this.$router.push('/products');\n      if (this.category !== 'all') {\n        url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?category=${this.category}`;\n        this.$router.push(`/products?category=${this.category}`);\n      }\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products;\n          this.pagination = res.data.pagination;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    toggleFavorite(id) {\n      // 查資料，有沒有這一個 id 如果有 1，沒有 -1\n      const favoriteIndex = this.favorite.findIndex((item) => item === id);\n      if (favoriteIndex === -1) {\n        this.favorite.push(id);\n      } else {\n        this.favorite.splice(favoriteIndex, 1);\n      }\n    },\n  },\n  mounted() {\n    if (this.$route.query.category) {\n      this.category = this.$route.query.category;\n    }\n    this.getProducts();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n.card {\n  img {\n    height: 200px;\n    object-fit: cover;\n  }\n}\n\n.menu {\n  li {\n    width: 20%;\n    list-style: none;\n  }\n  a {\n    text-decoration: none;\n  }\n}\n\nspan {\n  cursor: pointer;\n  i {\n    color: red;\n  }\n}\n</style>\n","import { render } from \"./ProductsView.vue?vue&type=template&id=72f0a047\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductsView.vue?vue&type=style&index=0&id=72f0a047&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_3","_hoisted_5","_hoisted_8","_hoisted_10","_createElementBlock","$props","has_pre","href","onClick","$options","current_page","total_pages","_Fragment","_renderList","page","index","active","key","_hoisted_7","has_next","props","pages","type","Object","default","methods","changePages","item","this","$emit","__exports__","render","_hoisted_13","_hoisted_16","_createVNode","_component_VLoading","$data","product","id","src","imageUrl","alt","_toDisplayString","title","includes","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_17","description","_component_router_link","to","_component_Pagination","onChangePages","data","products","isLoading","pagination","category","favorite","JSON","parse","localStorage","getItem","components","Pagination","watch","handler","setItem","stringify","emitter","deep","changeCategory","getProducts","url","$router","push","$http","get","then","res","catch","err","$messageState","response","toggleFavorite","favoriteIndex","findIndex","splice","mounted","$route","query"],"sourceRoot":""}