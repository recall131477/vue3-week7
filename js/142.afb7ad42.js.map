{"version":3,"file":"js/142.afb7ad42.js","mappings":"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","sources":["webpack://vue3-week7/./src/views/frontend/CheckoutView.vue","webpack://vue3-week7/./src/views/frontend/CheckoutView.vue?4c86"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mt-4\">\n      <VLoading :active=\"isLoading\"></VLoading>\n      <h2 class=\"text-center\">訂單資訊</h2>\n      <div class=\"row\">\n        <div class=\"col-6\">商品資訊</div>\n        <div class=\"col-3\">數量</div>\n        <div class=\"col-3\">小計</div>\n      </div>\n      <div class=\"row\" v-for=\"item in cart.carts\" :key=\"item.id\">\n        <div class=\"col-6\">\n          <div class=\"d-flex align-items-center\">\n            <img :src=\"item.product.imageUrl\" :alt=\"item.title\" />\n            <p>{{ item.product.title }}</p>\n          </div>\n        </div>\n        <div class=\"col-3\">{{ item.qty }}</div>\n        <div class=\"col-3\">{{ $filters.currency(item.total) }}</div>\n      </div>\n      <h2 class=\"text-center\">填寫資訊</h2>\n      <div class=\"my-5 row justify-content-center\">\n        <VForm ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <VField\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></VField>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\"> Email </label>\n            <VField\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            >\n            </VField>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <VField\n              id=\"tel\"\n              name=\"電話\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"form.user.tel\"\n            >\n            </VField>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <VField\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></VField>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">備註</label>\n            <textarea\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <!-- 當購物車產品為 0 或錯誤訊息大於 1 時，表單無法送出並顯示不能點選 ( ? = 可選串連) -->\n            <button type=\"submit\" class=\"btn btn-danger\" :disabled=\"Object.keys(errors).length > 0\">\n              送出訂單\n            </button>\n          </div>\n        </VForm>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      cart: {\n        carts: [],\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      id: '',\n      isLoadingItem: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    // 取得購物車資料\n    getCart() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.cart = res.data.data;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n    // 判斷電話是否符合正規表達式\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '請輸入正確的電話號碼';\n    },\n    // 建立表單\n    createOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      const status = '建立訂單';\n      this.$http\n        .post(url, { data: order })\n        .then((res) => {\n          this.$messageState(res, status);\n          this.$refs.form.resetForm(); // 清空 form 表單內容，套件用法\n          this.form.message = '';\n          this.$router.push({\n            name: '確認訂單', // params 只能用 name 不能用 path\n            params: { id: res.data.orderId },\n          });\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$messageState(err.response, '錯誤訊息');\n        });\n    },\n  },\n  mounted() {\n    this.getCart();\n  },\n};\n</script>\n\n<style lang=\"scss\">\nimg {\n  width: 200px;\n  height: 100px;\n  object-fit: cover;\n}\n</style>\n","import { render } from \"./CheckoutView.vue?vue&type=template&id=0b67bc31\"\nimport script from \"./CheckoutView.vue?vue&type=script&lang=js\"\nexport * from \"./CheckoutView.vue?vue&type=script&lang=js\"\n\nimport \"./CheckoutView.vue?vue&type=style&index=0&id=0b67bc31&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\2022-Vue3直播班\\\\vue3-week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_createElementBlock","_createVNode","_component_VLoading","active","$data","_hoisted_3","_Fragment","_renderList","carts","item","key","id","src","product","imageUrl","alt","title","_toDisplayString","qty","_ctx","currency","total","_hoisted_10","_component_VForm","ref","onSubmit","$options","errors","_hoisted_13","_component_VField","name","type","placeholder","rules","user","$event","_component_ErrorMessage","_hoisted_15","email","_hoisted_17","tel","_hoisted_19","address","_hoisted_21","cols","rows","message","disabled","Object","keys","length","_hoisted_23","data","cart","form","isLoadingItem","isLoading","methods","getCart","this","url","$http","get","then","res","catch","err","$messageState","response","isPhone","value","phoneNumber","test","createOrder","order","status","post","$refs","resetForm","$router","push","params","orderId","mounted","__exports__","render"],"sourceRoot":""}